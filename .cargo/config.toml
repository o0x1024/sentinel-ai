[build]
# 禁用增量编译以减少PDB文件大小
incremental = false

[target.x86_64-pc-windows-msvc]
# 完全禁用调试信息以避免PDB限制问题 (LNK1318)
rustflags = [
    "-C", "debuginfo=0",
    "-C", "strip=symbols",
    "-C", "link-arg=/DEBUG:NONE",
    "-C", "link-arg=/INCREMENTAL:NO",
]

[env]
# 禁用 Rust backtrace 以减少调试信息
RUST_BACKTRACE = "0"
# 为 aws-lc-sys 设置 CMake 生成器为 Ninja
CMAKE_GENERATOR = "Ninja"
# 强制使用预生成的汇编代码，减少对编译工具链的依赖
AWS_LC_SYS_PREGENERATED = "1"

# 手动指定 Windows SDK 和 MSVC 包含路径，解决 cl.exe 找不到 windows.h 的问题
# 注意：这些路径基于您提供的 SDK 目录和之前的报错日志
INCLUDE = "C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\shared;C:\\Program Files\\Microsoft Visual Studio\\18\\Community\\VC\\Tools\\MSVC\\14.50.35717\\include"
LIB = "C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.22621.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.22621.0\\um\\x64;C:\\Program Files\\Microsoft Visual Studio\\18\\Community\\VC\\Tools\\MSVC\\14.50.35717\\lib\\x64"

# Protobuf 编译器路径 - 留空让系统自动查找
PROTOC = "C:\\protoc\\bin\\protoc.exe"
PROTOC_INCLUDE = "C:\\protoc\\include"
