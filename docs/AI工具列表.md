# Sentinel-AI 项目 - AI工具列表及作用描述

## 一、LLM（大语言模型）服务提供商

| 工具名称 | 版本/模型 | 作用描述 |
|---------|----------|---------|
| **OpenAI** | GPT-4, GPT-4-Turbo, GPT-3.5-Turbo | **插件代码生成**：根据网站分析结果自动生成TypeScript漏洞检测插件<br/>**任务规划**：将复杂安全测试需求分解为可执行步骤<br/>**代码修复**：自动修复生成的插件代码中的语法和逻辑错误<br/>**特点**：代码生成能力强，理解准确 |
| **Anthropic** | Claude-3.5-Sonnet, Claude-3-Opus | **插件生成**：生成高质量的检测插件代码<br/>**复杂推理**：处理需要深度分析的复杂安全场景<br/>**特点**：长上下文支持（200K+ tokens），安全性好 |
| **Google Gemini** | Gemini-Pro, Gemini-1.5-Pro | **多模态任务**：处理包含图像、文本的混合安全分析<br/>**快速交互**：提供快速响应的对话式安全测试指导<br/>**特点**：多模态支持，响应速度快 |
| **XAI (Grok)** | Grok-1 | **实时信息查询**：查询最新的安全漏洞信息和安全事件<br/>**特点**：具备联网能力，可获取实时数据 |
| **DeepSeek** | DeepSeek-Chat, DeepSeek-Coder | **代码生成**：生成TypeScript检测插件代码<br/>**低成本推理**：处理大量简单任务，降低API成本<br/>**特点**：高性价比，编程能力强，成本低 |
| **Ollama** | Llama 3, Qwen, CodeLlama | **本地部署**：在本地运行LLM模型，无需联网<br/>**隐私保护**：敏感数据不离开本地环境<br/>**特点**：离线可用，数据安全，完全可控 |
| **Groq** | Mixtral, Llama 3 | **快速推理**：需要极速响应的实时安全分析场景<br/>**特点**：推理速度极快（毫秒级响应） |
| **Cohere** | Command, Command-R | **文本生成**：生成安全测试报告和文档<br/>**分类任务**：对漏洞进行分类和优先级排序<br/>**特点**：企业级API，稳定性好 |
| **ModelScope** | 通义千问等 | **国产模型**：国内用户访问稳定的LLM服务<br/>**特点**：国内访问稳定，符合数据合规要求 |
| **OpenRouter** | 100+ 模型 | **多模型聚合**：通过一个API访问多个LLM提供商<br/>**模型切换**：根据任务需求自动选择最合适的模型<br/>**特点**：统一接口，灵活切换 |
| **Custom** | 自部署模型 | **自定义提供商**：集成私有化部署的LLM模型<br/>**完全自主**：数据不出内网，完全自主可控 |

---

## 二、Rig框架（Rust LLM工具库）

| 工具名称 | 版本 | 作用描述 |
|---------|------|---------|
| **Rig-Core** | 0.24.0 | **Agent抽象**：提供构建AI Agent的基础框架，支持创建可复用的Agent组件<br/>**Tool调用**：统一的工具调用接口，让AI Agent能够调用外部工具<br/>**Prompt管理**：模板化的提示词管理系统，支持动态Prompt构建<br/>**流式响应**：支持流式输出，实时返回AI生成内容<br/>**应用**：所有AI引擎的基础框架 |
| **Rig-LanceDB** | 0.2.27 | **向量存储集成**：将Rig Agent与LanceDB向量数据库无缝连接<br/>**自动Embedding**：自动将文本转换为向量表示<br/>**语义检索**：基于向量相似度的智能检索功能<br/>**应用**：RAG（检索增强生成）服务的核心组件 |

---

## 三、LanceDB（向量数据库）

| 工具名称 | 版本 | 作用描述 |
|---------|------|---------|
| **LanceDB** | 0.22.3 | **文档向量化存储**：将安全文档、漏洞报告等文本内容转换为向量并存储<br/>**语义相似度搜索**：基于向量相似度快速检索相关文档和知识<br/>**集合管理**：管理多个向量集合（表），支持不同知识库的隔离<br/>**应用场景**：<br/>- 知识库检索：存储安全文档、历史漏洞报告，用户查询时自动检索相关知识<br/>- 相似漏洞查找：基于漏洞特征查找历史相似案例<br/>- 插件推荐：根据目标网站特征推荐合适的检测插件<br/>- 学习增强：AI从历史成功案例中学习，生成更精准的检测插件 |

---

## 四、Deno Core（JS/TS运行时）

| 工具名称 | 版本 | 作用描述 |
|---------|------|---------|
| **Deno Core** | 0.368.0 | **插件沙箱执行**：在安全的V8隔离环境中执行AI生成的TypeScript插件代码<br/>**安全隔离**：<br/>- 内存隔离：每个插件运行在独立的V8隔离区<br/>- 权限控制：仅允许调用预定义的Rust Op函数<br/>- 资源限制：可设置CPU、内存限制<br/>- 无文件系统访问：插件无法直接访问磁盘<br/>- 网络受限：仅通过fetch API发起网络请求<br/>**内置API**：提供fetch、TextDecoder、URL等Web标准API，以及自定义的漏洞告警API<br/>**应用**：执行AI生成的漏洞检测插件，确保代码安全运行 |

---

## 五、Embedding（文本向量化）服务

| 工具名称 | 模型 | 维度 | 作用描述 |
|---------|------|------|---------|
| **OpenAI Embedding** | text-embedding-3-small | 1536 | **通用文本向量化**：将安全文档、漏洞报告等文本转换为1536维向量<br/>**成本**：$0.02/1M tokens<br/>**应用**：RAG知识库的文档向量化 |
| **OpenAI Embedding** | text-embedding-3-large | 3072 | **高精度向量化**：提供更高精度的文本向量表示<br/>**成本**：$0.13/1M tokens<br/>**应用**：需要高精度检索的场景 |
| **Cohere Embedding** | embed-multilingual-v3 | 1024 | **多语言支持**：支持中文、英文等多种语言的文本向量化<br/>**成本**：$0.10/1M tokens<br/>**应用**：多语言安全文档的向量化 |
| **本地模型** | sentence-transformers | 384-768 | **离线向量化**：在本地运行，无需API调用<br/>**成本**：免费<br/>**应用**：隐私敏感场景，离线环境 |

**核心功能**：
- **文档导入时自动向量化**：解析文档 → 分块（500字符，重叠50） → 批量生成Embedding → 存储到LanceDB
- **查询时向量化**：将用户查询文本向量化 → 向量检索 → 返回相似文档
- **相似度计算**：使用余弦相似度算法计算向量间的相似程度

---

## 六、Reranking（重排序）服务

| 工具名称 | 模型 | 作用描述 |
|---------|------|---------|
| **Cohere Reranker** | rerank-english-v3.0 | **英文优化重排序**：对向量检索结果进行精确重排序，提升英文文档检索精度<br/>**成本**：$2.00/1M tokens<br/>**工作流程**：向量检索获得Top-100结果 → Reranking重新排序 → 返回Top-10最相关结果 |
| **Cohere Reranker** | rerank-multilingual-v3.0 | **多语言重排序**：支持中文、英文等多种语言的检索结果重排序<br/>**成本**：$2.00/1M tokens |
| **Jina AI Reranker** | jina-reranker-v1-base | **开源重排序**：免费的开源重排序模型<br/>**应用**：成本敏感场景的检索优化 |

**作用**：在向量检索后，使用更精确的模型对结果重新排序，显著提升检索精度和相关性。

---

## 七、Prompt工程工具

| 工具名称 | 作用描述 |
|---------|---------|
| **Prompt模板管理系统** | **数据库存储**：将所有Prompt模板存储在SQLite数据库中，支持版本管理和A/B测试<br/>**模板类型**：<br/>- PluginGeneration：AI插件生成主模板<br/>- PluginFix：插件代码修复模板<br/>- PluginInterface：插件接口说明模板<br/>- PluginOutputFormat：插件输出格式模板<br/>- ReactPrompt：ReAct引擎提示词<br/>- PlanExecutePrompt：Plan-Execute引擎提示词<br/>- LlmCompilerPrompt：LLM Compiler引擎提示词<br/>- OrchestratorPrompt：Orchestrator引擎提示词 |
| **Prompt构建器** | **动态Prompt构建**：根据网站分析结果、漏洞类型、目标端点等信息动态构建Prompt<br/>**Few-shot支持**：自动选择高质量的插件代码示例，提升生成质量<br/>**代码修复Prompt**：根据错误信息构建修复Prompt，支持多次尝试 |
| **Few-shot示例管理** | **示例存储**：存储优秀的插件代码示例，包含漏洞类型、目标域名、代码质量评分等信息<br/>**智能选择**：优先选择相同漏洞类型、相似技术栈、高质量分数的示例<br/>**应用**：为LLM提供3-5个优秀示例，显著提升插件生成质量 |

---

## 八、MCP（Model Context Protocol）集成

| 工具名称 | 版本 | 作用描述 |
|---------|------|---------|
| **rmcp** | 0.8.3 | **MCP协议实现**：标准化的AI模型上下文传递协议，用于扩展AI Agent能力<br/>**功能**：<br/>- MCP客户端：连接外部MCP服务器<br/>- MCP服务端：提供MCP服务<br/>- 多种传输方式：stdio、SSE等<br/>**应用**：让AI Agent能够调用外部工具和服务 |
| **Playwright MCP** | - | **浏览器自动化**：<br/>- 启动浏览器（Chromium/Firefox/WebKit）<br/>- 页面导航和交互（点击、填充、选择）<br/>- JavaScript执行<br/>- 截图和网络流量捕获<br/>**应用场景**：<br/>- 自动化安全测试<br/>- XSS触发测试<br/>- 登录流程自动化<br/>- 动态内容抓取 |
| **File System MCP** | - | **文件系统操作**：<br/>- 文件读写<br/>- 目录遍历<br/>- 文件搜索<br/>- 路径操作<br/>**应用场景**：<br/>- 导入测试用例<br/>- 导出漏洞报告<br/>- 读取配置文件<br/>- 管理插件代码 |

---

## 九、AI引擎

| 引擎名称 | 作用描述 |
|---------|---------|
| **ReAct** | **推理与行动结合**：结合推理（Reasoning）和行动（Acting），让AI Agent能够思考后执行工具调用<br/>**工作流程**：思考 → 调用工具 → 观察结果 → 继续思考 → 最终回答<br/>**应用**：需要多步推理和工具调用的复杂安全测试任务 |
| **Plan-and-Execute** | **任务规划与执行**：将复杂任务分解为可执行的步骤计划，然后按顺序执行<br/>**特点**：支持任务依赖关系，确保执行顺序正确<br/>**应用**：多步骤安全测试场景，如"先扫描，再分析，最后生成报告" |
| **LLM Compiler** | **并行任务执行**：将任务分解为可并行执行的子任务，使用DAG（有向无环图）调度<br/>**特点**：最大并发10个任务，显著提升执行效率<br/>**应用**：需要同时扫描多个目标或执行多个检测插件的场景 |
| **ReWOO** | **工作流优化**：优化任务执行顺序，减少不必要的工具调用<br/>**特点**：智能规划，避免重复操作<br/>**应用**：需要优化执行效率的复杂工作流 |
| **Orchestrator** | **任务编排**：智能编排多个Agent和工具，协调复杂的安全测试流程<br/>**特点**：支持动态调整执行策略<br/>**应用**：大型安全测试项目，需要协调多个检测模块 |

---

## 十、开发与调试工具

| 工具名称 | 作用描述 |
|---------|---------|
| **LLM请求日志** | **请求追踪**：记录所有LLM API请求的详细信息<br/>**记录内容**：请求时间戳、模型名称、输入/输出Token数、响应时间、成本估算<br/>**日志路径**：`logs/llm-http-requests-{date}.log`<br/>**应用**：性能分析、成本监控、问题调试 |
| **Prompt调试工具** | **Prompt分析**：<br/>- 查看完整的Prompt内容<br/>- 对比不同Prompt版本<br/>- A/B测试不同模板<br/>- 导出Prompt用于外部测试<br/>**使用**：设置环境变量 `SENTINEL_DEBUG_PROMPTS=1` 启用调试模式 |
| **插件测试工具** | **插件验证**：<br/>- 验证生成的插件语法<br/>- 执行插件单元测试<br/>- 模拟HTTP流量测试<br/>**应用**：确保AI生成的插件代码质量 |

---

## 总结

本项目集成了**11个LLM服务提供商**、**2个Rig框架组件**、**1个向量数据库**、**1个JS运行时**、**4个Embedding模型**、**3个Reranking模型**、**1个MCP协议**、**5种AI引擎**，以及完善的Prompt工程和调试工具，构建了一个完整的AI驱动的安全测试平台。

**核心创新**：
1. **AI驱动的插件生成**：根据网站分析自动生成定制化检测插件
2. **RAG增强知识库**：利用向量数据库存储和检索安全知识
3. **多引擎并行执行**：支持5种不同的AI引擎，适应不同场景需求
4. **MCP协议扩展**：通过标准协议集成外部工具，扩展AI能力

