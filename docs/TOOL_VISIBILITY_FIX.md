# AIå·¥å…·åœ¨Agentç®¡ç†ä¸­ä¸å¯è§é—®é¢˜ä¿®å¤

## ğŸ“‹ é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šï¼šåœ¨ Agent ç®¡ç†ç•Œé¢ç¼–è¾‘"å¯ç”¨å·¥å…·"æ—¶ï¼Œ`generate_advanced_plugin` å·¥å…·æ²¡æœ‰å‡ºç°åœ¨å·¥å…·åˆ—è¡¨ä¸­ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

`generate_advanced_plugin` å·¥å…·è¢«é”™è¯¯åœ°æ ‡è®°ä¸º"plugin"ç±»å‹ï¼Œå¯¼è‡´è¢«å‰ç«¯å·¥å…·åˆ—è¡¨è¿‡æ»¤æ‰ã€‚

### è¯¦ç»†åˆ†æ

1. **å‰ç«¯åŠ è½½å·¥å…·çš„é€»è¾‘**ï¼ˆ`src/views/AgentManager.vue`ï¼‰ï¼š
   ```typescript
   const loadTools = async () => {
     const grouped = await invoke<any>('list_unified_tools_grouped')
     builtinTools.value = grouped.builtin.filter((t: any) => t?.available)
     // ...
   }
   ```

2. **åç«¯è¿‡æ»¤é€»è¾‘**ï¼ˆ`src-tauri/src/commands/ai_commands.rs:407-412`ï¼‰ï¼š
   ```rust
   // è·³è¿‡æ’ä»¶å·¥å…·ï¼ˆåç§°ä»¥ plugin:: å¼€å¤´æˆ–åŒ…å« plugin æ ‡ç­¾ï¼‰
   // æ’ä»¶å·¥å…·åº”è¯¥é€šè¿‡ list_plugins æ¥å£å•ç‹¬ç®¡ç†
   let is_plugin = t.name.starts_with("plugin::") || 
                   t.metadata.tags.iter().any(|x| x == "plugin");
   if is_plugin {
       continue;
   }
   ```

3. **é—®é¢˜æ‰€åœ¨**ï¼ˆ`src-tauri/src/tools/generator_tools.rs:97`ï¼‰ï¼š
   ```rust
   tags: vec!["generator".to_string(), "plugin".to_string(), "plan-b".to_string(), "ai".to_string()],
   //                                    ^^^^^^^^ è¿™ä¸ªæ ‡ç­¾å¯¼è‡´å·¥å…·è¢«è¿‡æ»¤
   ```

### ä¸ºä»€ä¹ˆä¼šè¿™æ ·è®¾è®¡ï¼Ÿ

åç«¯çš„è¿‡æ»¤é€»è¾‘æ˜¯ä¸ºäº†åŒºåˆ†ï¼š
- **å†…ç½®å·¥å…·**ï¼šç³»ç»Ÿæä¾›çš„æ ¸å¿ƒåŠŸèƒ½å·¥å…·ï¼ˆåº”è¯¥åœ¨ Agent ç®¡ç†ä¸­æ˜¾ç¤ºï¼‰
- **æ’ä»¶å·¥å…·**ï¼šç”¨æˆ·é€šè¿‡æ’ä»¶ç³»ç»ŸåŠ è½½çš„è‡ªå®šä¹‰å·¥å…·ï¼ˆé€šè¿‡ `list_plugins` å•ç‹¬ç®¡ç†ï¼‰

ä½† `generate_advanced_plugin` è™½ç„¶æ˜¯ç”Ÿæˆæ’ä»¶çš„å·¥å…·ï¼Œä½†å®ƒæœ¬èº«æ˜¯**å†…ç½®å·¥å…·**ï¼Œä¸åº”è¯¥è¢«æ ‡è®°ä¸º "plugin"ã€‚

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹å†…å®¹

ç§»é™¤ `generate_advanced_plugin` å·¥å…· tags ä¸­çš„ `"plugin"` æ ‡ç­¾ï¼Œæ›¿æ¢ä¸ºæ›´åˆé€‚çš„ `"security"` æ ‡ç­¾ã€‚

**ä¿®æ”¹å‰**ï¼š
```rust
tags: vec!["generator".to_string(), "plugin".to_string(), "plan-b".to_string(), "ai".to_string()],
```

**ä¿®æ”¹å**ï¼š
```rust
tags: vec!["generator".to_string(), "plan-b".to_string(), "ai".to_string(), "security".to_string()],
```

### ä¿®æ”¹ä½ç½®

- **æ–‡ä»¶**ï¼š`src-tauri/src/tools/generator_tools.rs`
- **è¡Œå·**ï¼š97

## ğŸ¯ éªŒè¯æ–¹æ³•

### 1. é‡æ–°ç¼–è¯‘åç«¯
```bash
cd src-tauri
cargo build
```

### 2. å¯åŠ¨åº”ç”¨

### 3. æ£€æŸ¥å·¥å…·åˆ—è¡¨
1. æ‰“å¼€ **Agent ç®¡ç†** é¡µé¢
2. ç‚¹å‡» **æ–°å¢Agent** æˆ– **ç¼–è¾‘** ç°æœ‰ Agent
3. å±•å¼€ **å¯ç”¨å·¥å…·** éƒ¨åˆ†
4. åœ¨ **å†…ç½®å·¥å…·** åˆ—è¡¨ä¸­åº”è¯¥èƒ½çœ‹åˆ°ï¼š
   - âœ… `analyze_website` - åˆ†æç½‘ç«™ç»“æ„
   - âœ… `generate_advanced_plugin` - ç”Ÿæˆé«˜çº§AIæ’ä»¶

### 4. æµ‹è¯•å·¥å…·åŠŸèƒ½
åˆ›å»ºä¸€ä¸ª Agentï¼Œå‹¾é€‰è¿™ä¸¤ä¸ªå·¥å…·ï¼Œç„¶åæµ‹è¯•ï¼š
```
å¯¹ http://testphp.vulnweb.com è¿›è¡Œå…¨é¢çš„å®‰å…¨æ¸—é€æµ‹è¯•ï¼Œå‘ç°æ‰€æœ‰æ¼æ´
```

AI åº”è¯¥ä¼šï¼š
1. è°ƒç”¨ `analyze_website` åˆ†æç½‘ç«™ç»“æ„
2. è°ƒç”¨ `generate_advanced_plugin` ç”Ÿæˆé’ˆå¯¹æ€§æ’ä»¶
3. ä½¿ç”¨ç”Ÿæˆçš„æ’ä»¶è¿›è¡Œæ¼æ´æ£€æµ‹

## ğŸ“Š ç›¸å…³å·¥å…·å¯¹æ¯”

| å·¥å…·åç§° | Tags | æ˜¯å¦æ˜¾ç¤ºåœ¨Agentç®¡ç† | è¯´æ˜ |
|---------|------|-------------------|------|
| `analyze_website` | `["analyzer", "website", "plan-b"]` | âœ… æ˜¯ | æ­£ç¡®ï¼Œæ²¡æœ‰ "plugin" æ ‡ç­¾ |
| `generate_advanced_plugin` | ~~`["generator", "plugin", ...]`~~ â†’ `["generator", "plan-b", "ai", "security"]` | âœ… æ˜¯ï¼ˆä¿®å¤åï¼‰ | ç§»é™¤äº† "plugin" æ ‡ç­¾ |
| `http_request` | `["http", "network", "builtin"]` | âœ… æ˜¯ | å†…ç½®å·¥å…· |
| `plugin::test_1` | `["plugin"]` | âŒ å¦ | æ­£ç¡®ï¼Œè¿™æ˜¯çœŸæ­£çš„æ’ä»¶å·¥å…· |

## ğŸ”„ å½±å“èŒƒå›´

### å—ç›Šçš„åŠŸèƒ½
1. **AI è‡ªåŠ¨åŒ–æ’ä»¶ç”Ÿæˆ**ï¼šç”¨æˆ·å¯ä»¥åœ¨ Agent ä¸­å¯ç”¨ `generate_advanced_plugin` å·¥å…·
2. **æ–¹æ¡ˆBå®Œæ•´æµç¨‹**ï¼šAI å¯ä»¥å®Œæ•´æ‰§è¡Œ"åˆ†æ â†’ ç”Ÿæˆ â†’ æµ‹è¯•"çš„è‡ªåŠ¨åŒ–æµç¨‹
3. **ç”¨æˆ·ä½“éªŒ**ï¼šä¸å†éœ€è¦æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥å¯ç”¨è¿™ä¸ªå·¥å…·

### ä¸å—å½±å“çš„åŠŸèƒ½
- ç°æœ‰çš„æ’ä»¶ç³»ç»Ÿï¼ˆ`plugin::*` å·¥å…·ï¼‰ä»ç„¶é€šè¿‡ `list_plugins` å•ç‹¬ç®¡ç†
- å…¶ä»–å†…ç½®å·¥å…·çš„æ˜¾ç¤ºé€»è¾‘ä¿æŒä¸å˜

## ğŸ“ ç›¸å…³æ–‡æ¡£

- `docs/OPTIMIZED_REACT_PROMPT.md` - ä¼˜åŒ–åçš„ ReAct æç¤ºè¯ï¼Œå¼ºè°ƒä½¿ç”¨è¿™äº›å·¥å…·
- `docs/AI_PLUGIN_GENERATION_ISSUE_FIX.md` - AI æœªä½¿ç”¨æ’ä»¶ç”ŸæˆåŠŸèƒ½çš„é—®é¢˜åˆ†æ
- `docs/HTTP_REQUEST_PROXY_SUPPORT.md` - HTTP è¯·æ±‚å·¥å…·çš„ä»£ç†æ”¯æŒ

## ğŸ‰ æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**æ ‡ç­¾åˆ†ç±»é”™è¯¯**å¯¼è‡´çš„é—®é¢˜ï¼š
- `generate_advanced_plugin` æ˜¯ä¸€ä¸ª**ç”Ÿæˆæ’ä»¶çš„å·¥å…·**ï¼Œä½†å®ƒæœ¬èº«æ˜¯**å†…ç½®å·¥å…·**
- é”™è¯¯åœ°ç»™å®ƒæ‰“ä¸Š `"plugin"` æ ‡ç­¾ï¼Œå¯¼è‡´è¢«å½“ä½œæ’ä»¶å·¥å…·è¿‡æ»¤æ‰
- ä¿®å¤åï¼Œè¿™ä¸ªå·¥å…·ä¼šæ­£å¸¸å‡ºç°åœ¨ Agent ç®¡ç†çš„å†…ç½®å·¥å…·åˆ—è¡¨ä¸­

**è¿™ä¸æ˜¯ Bugï¼Œè€Œæ˜¯è®¾è®¡ä¸Šçš„åˆ†ç±»é”™è¯¯ï¼** âœ…

