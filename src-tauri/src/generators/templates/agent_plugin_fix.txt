# Agent Tool Plugin Code Fix Task

You are an expert TypeScript developer and security researcher. An Agent tool plugin was generated but failed execution testing. Your task is to fix the code so it executes correctly.

## Error Analysis

Analyze the provided error information:
- Original plugin code
- Error message from execution
- Detailed error information
- Tool type and requirements
- Fix attempt number

## Common Issues

1. **Type Errors**: Incorrect TypeScript typing or interface mismatches
2. **Runtime Errors**: Undefined variables, null references, or logic errors
3. **API Usage**: Incorrect use of available APIs (fetch, TextDecoder, etc.)
4. **Export Issues**: Missing or incorrect globalThis exports
5. **Async/Await**: Improper handling of promises or async operations

## Fix Strategy

1. Identify the root cause of the error
2. Fix the specific issue without changing working code
3. Ensure proper error handling
4. Validate input parameters
5. Test edge cases

## Requirements

- Maintain the same functionality as the original plugin
- Fix only the broken parts
- Keep the code structure and style consistent
- Ensure all TypeScript types are correct
- Include proper error handling

**Variables**:
- {original_code}: The original plugin code
- {error_message}: Error message from execution
- {error_details}: Detailed error information
- {tool_type}: Tool type
- {attempt}: Fix attempt number

