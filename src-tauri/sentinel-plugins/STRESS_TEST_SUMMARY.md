# æ’ä»¶ç³»ç»Ÿå‹åŠ›æµ‹è¯•æ€»ç»“

## æµ‹è¯•è¦†ç›–èŒƒå›´

å·²åˆ›å»ºå®Œæ•´çš„å‹åŠ›æµ‹è¯•å¥—ä»¶ï¼Œæ¶µç›–ä»¥ä¸‹åœºæ™¯ï¼š

### 1ï¸âƒ£ å†…å­˜ç›¸å…³æµ‹è¯•
- **å†…å­˜æ³„æ¼æ£€æµ‹**ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰
  - ç®€å•æ’ä»¶é•¿æ—¶é—´è¿è¡Œ
  - å¤§å¯¹è±¡åˆ†é…å’Œé‡Šæ”¾
  - é—­åŒ…å’Œå¾ªç¯å¼•ç”¨
  - å­—ç¬¦ä¸²æ‹¼æ¥
  - å¼‚æ­¥æ“ä½œ
  - å¤šå¼•æ“å®ä¾‹éš”ç¦»
- **æ£€æµ‹æ–¹æ³•**: çº¿æ€§å›å½’åˆ†æï¼Œæ–œç‡ > 0.1 MB/s åˆ¤å®šä¸ºæ³„æ¼

### 2ï¸âƒ£ CPUç›¸å…³æµ‹è¯•
- **CPUå¯†é›†å‹åœºæ™¯**ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰
  - æ­£åˆ™è¡¨è¾¾å¼å›æº¯çˆ†ç‚¸
  - å¤§æ•°æ®æ’åºï¼ˆ50,000æ¡ï¼‰
  - é€’å½’ç®—æ³•ï¼ˆæ–æ³¢é‚£å¥‘ã€é˜¶ä¹˜ã€Ackermannï¼‰
  - å¯†é›†æ•°å­¦è®¡ç®—ï¼ˆè´¨æ•°ã€çŸ©é˜µã€ä¸‰è§’å‡½æ•°ï¼‰
  - å­—ç¬¦ä¸²å¤„ç†å¯†é›†å‹
  - å¹¶å‘CPUå¯†é›†å‹ä»»åŠ¡

### 3ï¸âƒ£ å¹¶å‘ç›¸å…³æµ‹è¯•
- **å¹¶å‘å‹åŠ›**ï¼ˆ7ä¸ªæµ‹è¯•ï¼‰
  - é€æ­¥å¢åŠ å¹¶å‘æ•°ï¼ˆ10â†’2000ï¼‰
  - æŒç»­é«˜å¹¶å‘ï¼ˆ60ç§’ï¼Œ100å¹¶å‘ï¼‰
  - PluginExecutorå¹¶å‘
  - PluginManagerå¤šæ’ä»¶å¹¶å‘
  - ç«æ€æ¡ä»¶æ£€æµ‹
  - æ­»é”æ£€æµ‹
  - çº¿ç¨‹æ± è€—å°½

### 4ï¸âƒ£ V8å¼•æ“é™åˆ¶æµ‹è¯•
- **å¼•æ“æé™**ï¼ˆ7ä¸ªæµ‹è¯•ï¼‰
  - å †å†…å­˜é™åˆ¶ï¼ˆ1000Ã—1MBæ•°ç»„ï¼‰
  - æ ˆæº¢å‡ºï¼ˆæ·±åº¦é€’å½’ï¼‰
  - æ— é™å¾ªç¯æ£€æµ‹ï¼ˆ10Mæ¬¡è¿­ä»£ï¼‰
  - å¤§å¯¹è±¡åˆ†é…ï¼ˆ1KBâ†’10MBï¼‰
  - å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶ï¼ˆ1KBâ†’100MBï¼‰
  - å¯¹è±¡å±æ€§æ•°é‡ï¼ˆ100â†’1Mä¸ªï¼‰
  - å¤šå¼•æ“éš”ç¦»

### 5ï¸âƒ£ åŸºç¡€å‹åŠ›æµ‹è¯•
- **ç»¼åˆåœºæ™¯**ï¼ˆ8ä¸ªæµ‹è¯•ï¼‰
  - å•å¼•æ“é•¿æ—¶é—´è¿è¡Œï¼ˆ10,000æ¬¡ï¼‰
  - å¹¶å‘å¼•æ“åˆ›å»ºé”€æ¯ï¼ˆ100ä¸ªï¼‰
  - å¤§æ•°æ®é‡äº‹åŠ¡å¤„ç†ï¼ˆ1KBâ†’5MBï¼‰
  - PluginManagerå¹¶å‘æ‰«æ

### 6ï¸âƒ£ ç½‘ç»œæ“ä½œå‹åŠ›æµ‹è¯•
- **ç½‘ç»œå¹¶å‘**ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰
  - 10,000ä¸ªå¹¶å‘ç½‘ç»œè¯·æ±‚
  - é€æ­¥å¢åŠ æ‰¾ç½‘ç»œæé™ï¼ˆ10-2000ï¼‰
  - æ¯æ’ä»¶å¹¶å‘å¤šä¸ªHTTPè¯·æ±‚
  - ç½‘ç»œè¶…æ—¶å¤„ç†
  - æŒç»­ç½‘ç»œå‹åŠ›ï¼ˆ60ç§’ï¼‰
  - ä¸åŒç½‘ç»œæ¡ä»¶æ€§èƒ½æµ‹è¯•

## æ•…éšœåœºæ™¯è¯†åˆ«

### ğŸ”´ å†…å­˜æš´ç‚¸åœºæ™¯

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | é¢„æœŸç»“æœ |
|------|---------|---------|
| å…¨å±€å˜é‡ç´¯ç§¯ | æ’ä»¶ä½¿ç”¨å…¨å±€Map/ArrayæŒç»­æ·»åŠ æ•°æ® | å†…å­˜çº¿æ€§å¢é•¿ |
| å¤§å¯¹è±¡æœªé‡Šæ”¾ | æ¯æ¬¡æ‰§è¡Œåˆ†é…100MB+å¯¹è±¡ | å†…å­˜å¿«é€Ÿå¢é•¿ |
| é—­åŒ…æ•è· | é—­åŒ…æ•è·å¤§å¯¹è±¡å¹¶å­˜å‚¨åˆ°å…¨å±€ | å†…å­˜ç¼“æ…¢å¢é•¿ |
| å­—ç¬¦ä¸²æ‹¼æ¥ | å¾ªç¯æ‹¼æ¥å­—ç¬¦ä¸²1000+æ¬¡ | å†…å­˜å³°å€¼å‡é«˜ |

**æ£€æµ‹æŒ‡æ ‡**:
- å†…å­˜å¢é•¿ç‡ > 0.1 MB/s
- å³°å€¼å†…å­˜ > ç³»ç»Ÿå†…å­˜80%
- å¹³å‡å†…å­˜ > å³°å€¼å†…å­˜80%

### ğŸ”´ CPUæš´ç‚¸åœºæ™¯

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | é¢„æœŸç»“æœ |
|------|---------|---------|
| æ­£åˆ™å›æº¯ | `/(a+)+b/` åŒ¹é… "aaaaaa..." | CPU 100% |
| æ— é™å¾ªç¯ | `while(true)` æˆ–è¶…é•¿å¾ªç¯ | CPU 100% |
| é€’å½’çˆ†ç‚¸ | æ·±åº¦é€’å½’æ— ç»ˆæ­¢æ¡ä»¶ | CPU 100% + æ ˆæº¢å‡º |
| å¤§æ•°æ®å¤„ç† | æ’åº/è¿‡æ»¤50,000+æ¡æ•°æ® | CPU 80-95% |

**æ£€æµ‹æŒ‡æ ‡**:
- CPUä½¿ç”¨ç‡ > 90%æŒç»­10ç§’+
- å•æ¬¡æ‰§è¡Œæ—¶é—´ > 30ç§’
- ååé‡ < 1 ops/sec

### ğŸ”´ å¹¶å‘æš´ç‚¸åœºæ™¯

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | é¢„æœŸç»“æœ |
|------|---------|---------|
| çº¿ç¨‹æ± è€—å°½ | å¹¶å‘æ•° > 1000 | ä»»åŠ¡æ’é˜Ÿ/è¶…æ—¶ |
| æ­»é” | é”é¡ºåºä¸ä¸€è‡´ | ä»»åŠ¡æ°¸ä¹…é˜»å¡ |
| ç«æ€æ¡ä»¶ | å…±äº«çŠ¶æ€æ— ä¿æŠ¤ | æ•°æ®ä¸ä¸€è‡´ |
| èµ„æºç«äº‰ | å¤§é‡å¹¶å‘è¯»å†™ | æ€§èƒ½æ€¥å‰§ä¸‹é™ |

**æ£€æµ‹æŒ‡æ ‡**:
- é”™è¯¯ç‡ > 20%
- ä»»åŠ¡è¶…æ—¶ï¼ˆ10ç§’æ— å“åº”ï¼‰
- ååé‡ä¸‹é™ > 50%

### ğŸ”´ V8å¼•æ“é™åˆ¶

| é™åˆ¶ç±»å‹ | ç†è®ºæé™ | å®æµ‹æé™ | è§¦å‘åæœ |
|---------|---------|---------|---------|
| å †å†…å­˜ | ~4GB (64ä½) | æµ‹è¯•ä¸­ç¡®å®š | OOMé”™è¯¯ |
| æ ˆæ·±åº¦ | ~10,000å±‚ | æµ‹è¯•ä¸­ç¡®å®š | Stack overflow |
| å­—ç¬¦ä¸²é•¿åº¦ | ~536MB | æµ‹è¯•ä¸­ç¡®å®š | åˆ†é…å¤±è´¥ |
| å¯¹è±¡å±æ€§ | ~8Mä¸ª | æµ‹è¯•ä¸­ç¡®å®š | æ€§èƒ½ä¸‹é™ |

### ğŸ”´ ç½‘ç»œæš´ç‚¸åœºæ™¯

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | é¢„æœŸç»“æœ |
|------|---------|---------|
| è¿æ¥è€—å°½ | å¹¶å‘è¯·æ±‚ > 1000 | è¿æ¥è¶…æ—¶/æ‹’ç» |
| DNSè§£æå¤±è´¥ | é«˜å¹¶å‘DNSæŸ¥è¯¢ | è§£æé”™è¯¯ |
| ç«¯å£è€—å°½ | çŸ­æ—¶é—´å¤§é‡è¿æ¥ | ç«¯å£ä¸å¯ç”¨ |
| APIé™æµ | è¶…è¿‡æœåŠ¡ç«¯é™åˆ¶ | 429é”™è¯¯ |
| ç½‘ç»œè¶…æ—¶ | å»¶è¿Ÿå“åº” > è¶…æ—¶è®¾ç½® | è¯·æ±‚å¤±è´¥ |

**æ£€æµ‹æŒ‡æ ‡**:
- ç½‘ç»œé”™è¯¯ç‡ > 30%
- å¹³å‡å»¶è¿Ÿ > 5ç§’
- ååé‡ < 1 req/s
- DNSè§£æå¤±è´¥ç‡ > 10%

## æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°

æ ¹æ®æµ‹è¯•ç»“æœï¼Œç³»ç»Ÿçš„æœ€å¤§å¹¶å‘èƒ½åŠ›å–å†³äºï¼š

### å½±å“å› ç´ 
1. **ç³»ç»Ÿèµ„æº**
   - CPUæ ¸å¿ƒæ•°
   - å¯ç”¨å†…å­˜
   - æ“ä½œç³»ç»Ÿé™åˆ¶

2. **æ’ä»¶å¤æ‚åº¦**
   - ç®€å•æ’ä»¶: 200-500å¹¶å‘
   - ä¸­ç­‰å¤æ‚: 50-100å¹¶å‘
   - CPUå¯†é›†å‹: 10-20å¹¶å‘
   - å†…å­˜å¯†é›†å‹: 20-50å¹¶å‘

3. **æ‰§è¡Œæ¨¡å¼**
   - æ¯æ¬¡åˆ›å»ºæ–°å¼•æ“: 50-100å¹¶å‘
   - ä½¿ç”¨PluginExecutor: 100-200å¹¶å‘
   - PluginManagerå¤ç”¨: 200-500å¹¶å‘

### æ¨èé…ç½®

| ç³»ç»Ÿé…ç½® | ç®€å•æ’ä»¶ | å¤æ‚æ’ä»¶ | CPUå¯†é›†å‹ |
|---------|---------|---------|-----------|
| 4æ ¸8GB | 50 | 20 | 5 |
| 8æ ¸16GB | 100 | 50 | 10 |
| 16æ ¸32GB | 200 | 100 | 20 |
| 32æ ¸64GB | 500 | 200 | 50 |

## è¿è¡Œæµ‹è¯•

### å¿«é€Ÿå¼€å§‹
```bash
cd src-tauri/sentinel-plugins

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆéœ€è¦30-60åˆ†é’Ÿï¼‰
./run_stress_tests.sh all

# è¿è¡Œç‰¹å®šåˆ†ç±»
./run_stress_tests.sh memory      # å†…å­˜æµ‹è¯•
./run_stress_tests.sh cpu         # CPUæµ‹è¯•
./run_stress_tests.sh concurrency # å¹¶å‘æµ‹è¯•
./run_stress_tests.sh v8          # V8é™åˆ¶æµ‹è¯•
./run_stress_tests.sh robustness  # é²æ£’æ€§æµ‹è¯•
./run_stress_tests.sh network     # ç½‘ç»œæµ‹è¯•
```

### å•ä¸ªæµ‹è¯•
```bash
# æ‰¾åˆ°æœ€å¤§å¹¶å‘æ•°
cargo test --test concurrency_tests test_find_max_concurrency --release -- --ignored --nocapture

# å†…å­˜æ³„æ¼æ£€æµ‹
cargo test --test memory_leak_tests test_simple_plugin_memory_leak --release -- --ignored --nocapture

# CPUå‹åŠ›æµ‹è¯•
cargo test --test cpu_stress_tests test_large_data_sorting --release -- --ignored --nocapture

# ç½‘ç»œå‹åŠ›æµ‹è¯•ï¼ˆ10,000å¹¶å‘è¯·æ±‚ï¼‰
cargo test --test network_stress_tests test_10k_concurrent_requests --release -- --ignored --nocapture
```

## æµ‹è¯•ç»“æœè§£è¯»

### âœ… æ­£å¸¸æƒ…å†µ
- é”™è¯¯ç‡ < 5%
- å†…å­˜å¢é•¿ç‡ < 0.1 MB/s
- CPUä½¿ç”¨ç‡ < 90%
- ååé‡ç¨³å®š

### âš ï¸ è­¦å‘Šæƒ…å†µ
- é”™è¯¯ç‡ 5-20%
- å†…å­˜å¢é•¿ç‡ 0.1-0.5 MB/s
- CPUä½¿ç”¨ç‡ 90-95%
- ååé‡æ³¢åŠ¨ > 30%

### ğŸ”´ å±é™©æƒ…å†µ
- é”™è¯¯ç‡ > 20%
- å†…å­˜å¢é•¿ç‡ > 0.5 MB/s
- CPUä½¿ç”¨ç‡ > 95%æŒç»­
- ä»»åŠ¡è¶…æ—¶/æ­»é”

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å†…å­˜ä¼˜åŒ–
- âœ… é¿å…å…¨å±€å˜é‡ç´¯ç§¯
- âœ… åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡
- âœ… ä½¿ç”¨æµå¼å¤„ç†å¤§æ•°æ®
- âœ… é™åˆ¶ç¼“å­˜å¤§å°

### 2. CPUä¼˜åŒ–
- âœ… é¿å…å¤æ‚æ­£åˆ™è¡¨è¾¾å¼
- âœ… é™åˆ¶å¾ªç¯æ¬¡æ•°
- âœ… ä½¿ç”¨è¿­ä»£ä»£æ›¿é€’å½’
- âœ… åˆ†æ‰¹å¤„ç†å¤§æ•°æ®

### 3. å¹¶å‘ä¼˜åŒ–
- âœ… ä½¿ç”¨PluginExecutorå¤ç”¨å¼•æ“
- âœ… é™åˆ¶å¹¶å‘æ•°ï¼ˆæ ¹æ®ç³»ç»Ÿé…ç½®ï¼‰
- âœ… å®ç°è¶…æ—¶æœºåˆ¶
- âœ… ä½¿ç”¨è¿æ¥æ± 

### 4. V8å¼•æ“ä¼˜åŒ–
- âœ… é™åˆ¶å•æ¬¡åˆ†é…å¤§å°
- âœ… é¿å…æ·±åº¦é€’å½’
- âœ… ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§æ•°æ®
- âœ… å®šæœŸè§¦å‘GC

## ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡
1. **å†…å­˜ä½¿ç”¨ç‡**: < 80%
2. **CPUä½¿ç”¨ç‡**: < 90%
3. **é”™è¯¯ç‡**: < 5%
4. **å¹³å‡å“åº”æ—¶é—´**: < 1ç§’
5. **P99å“åº”æ—¶é—´**: < 5ç§’
6. **ååé‡**: > 10 ops/sec

### å‘Šè­¦é˜ˆå€¼
- ğŸŸ¡ å†…å­˜ > 70%
- ğŸŸ¡ CPU > 80%
- ğŸŸ¡ é”™è¯¯ç‡ > 3%
- ğŸ”´ å†…å­˜ > 85%
- ğŸ”´ CPU > 95%
- ğŸ”´ é”™è¯¯ç‡ > 10%

## æ–‡ä»¶æ¸…å•

```
sentinel-plugins/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ stress_tests.rs           # åŸºç¡€å‹åŠ›æµ‹è¯•
â”‚   â”œâ”€â”€ memory_leak_tests.rs      # å†…å­˜æ³„æ¼æµ‹è¯•
â”‚   â”œâ”€â”€ cpu_stress_tests.rs       # CPUå¯†é›†å‹æµ‹è¯•
â”‚   â”œâ”€â”€ concurrency_tests.rs      # å¹¶å‘å‹åŠ›æµ‹è¯•
â”‚   â”œâ”€â”€ v8_limits_tests.rs        # V8å¼•æ“é™åˆ¶æµ‹è¯•
â”‚   â”œâ”€â”€ network_stress_tests.rs   # ç½‘ç»œæ“ä½œå‹åŠ›æµ‹è¯•
â”‚   â”œâ”€â”€ quick_example.rs          # å¿«é€Ÿç¤ºä¾‹
â”‚   â”œâ”€â”€ stress_test_runner.rs     # æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ README.md                 # æµ‹è¯•æ–‡æ¡£
â”‚   â”œâ”€â”€ NETWORK_TESTS_GUIDE.md    # ç½‘ç»œæµ‹è¯•æŒ‡å—
â”‚   â””â”€â”€ COMPILATION_NOTE.md       # ç¼–è¯‘è¯´æ˜
â”œâ”€â”€ run_stress_tests.sh           # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ STRESS_TEST_SUMMARY.md        # æœ¬æ–‡æ¡£
â”œâ”€â”€ QUICK_START.md                # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ Cargo.toml                    # ä¾èµ–é…ç½®
```

## ä¸‹ä¸€æ­¥

1. âœ… åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•ï¼Œå»ºç«‹æ€§èƒ½åŸºçº¿
2. âœ… æ ¹æ®å®é™…ç¡¬ä»¶è°ƒæ•´å¹¶å‘é…ç½®
3. âœ… é›†æˆåˆ°CI/CDæµç¨‹
4. âœ… å®šæœŸè¿è¡Œå›å½’æµ‹è¯•
5. âœ… ç›‘æ§ç”Ÿäº§ç¯å¢ƒæŒ‡æ ‡

## å¸¸è§é—®é¢˜

**Q: æµ‹è¯•éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ**
A: å®Œæ•´æµ‹è¯•å¥—ä»¶éœ€è¦30-60åˆ†é’Ÿï¼Œå•ä¸ªåˆ†ç±»5-15åˆ†é’Ÿã€‚

**Q: å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œå—ï¼Ÿ**
A: ä¸å»ºè®®ã€‚å‹åŠ›æµ‹è¯•ä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼Œåº”åœ¨éš”ç¦»ç¯å¢ƒè¿è¡Œã€‚

**Q: å¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰å†…å­˜æ³„æ¼ï¼Ÿ**
A: æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šä¸­çš„"Growth Rate"ï¼Œ> 0.1 MB/s ä¸”æŒç»­å¢é•¿å³ä¸ºæ³„æ¼ã€‚

**Q: æœ€å¤§å¹¶å‘æ•°æ˜¯å¤šå°‘ï¼Ÿ**
A: å–å†³äºç³»ç»Ÿé…ç½®å’Œæ’ä»¶å¤æ‚åº¦ï¼Œè¿è¡Œ `test_find_max_concurrency` æµ‹è¯•ç¡®å®šã€‚

**Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œæ£€æŸ¥ç³»ç»Ÿèµ„æºï¼Œé™ä½å¹¶å‘æ•°é‡è¯•ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤æ–°çš„æµ‹è¯•ç”¨ä¾‹å’Œä¼˜åŒ–å»ºè®®ï¼

---

**åˆ›å»ºæ—¶é—´**: 2025-12-22
**æµ‹è¯•è¦†ç›–**: 34ä¸ªæµ‹è¯•ç”¨ä¾‹
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0

